# Use and Contribute to this Manual

## Click the Table of Contents

The Team PSD Manual's table of contents is clickable and separates into 3 header styles:

- Main Chapter
- Subchapter
- Subheader (nested within Subchapter)

### Main Chapter

Example: This chapter is chapter 2, Use this Manual.

### Subchapter

Example: This subchapter is 2.1, Click on Table of Contents.

### Subheader

Example: This chapter's subheaders are 2.1.1, 2.1.2, 2.1.3 which focuses on the 3 different header styles.

Note: Subheaders are nested within subchapters and not directly seen unless the subchapter is first clicked on.

Unclicked subchapter (this is by default):

![unclicked subchapter image](https://user-images.githubusercontent.com/59668647/89900713-f333ed80-db98-11ea-9745-0a8328609a34.png)

Clicked subchapter that reveals subheaders:

![clicked subchapter image](https://user-images.githubusercontent.com/59668647/89900739-fc24bf00-db98-11ea-8f9e-5a8261f2db1b.png)

## Ctrl+F Key Terms

To search for key terms **throughout the entire manual**, use the **built-in** Ctrl+F function in the manual.

Use your **laptop's keyboard** to Ctrl+F or Cmd+F to **search within chapters** if you already know which chapter a key term you are looking for is in, but unsure where within that chapter,

To use the **built-in** Ctrl-F function:

Click on the **magnifying glass icon** in the header at the top of the manual.

![magnifying glass icon image](https://user-images.githubusercontent.com/59668647/89899074-946d7480-db96-11ea-8f57-cc04c0057cdb.png)

Type in the **search box** the key term(s) you are searching **throughout the entire manual**.

![search box image](https://user-images.githubusercontent.com/59668647/89900231-4eb1ab80-db98-11ea-9540-f574ff01c8ec.png)

The chapters where the key term was found in will appear in the Table of Contents.

![search instances image](https://user-images.githubusercontent.com/59668647/89904640-085f4b00-db9e-11ea-8606-5b88e44519b7.png)

- To look through all of the instances, click the Enter button on your keyboard:
- To look within a chapter from the Table of Contents, click on the chapter you want to search in and click Enter to look through the instances in that chapter:
- Clicked on the Glossary chapter for example

![glossary chapter example image](https://user-images.githubusercontent.com/59668647/89900499-acde8e80-db98-11ea-8d39-6765219fd552.png)

## Contribute to the Manual using GitHub

### Create a Feature Branch from the GH-Pages Branch

- Start by creating a feature branch with the beginning of the branch named "**feature-gh-pages**".
- Name your branch according to the content you're revising or adding&mdash;for context and so it's easily identifiable.
   - Example:  feature-gh-pages_chapter_11
   - **Note:** It is important your branch name starts with the **exact syntax** as shown above! This naming structure evokes the relevant linter actions. 

<img alt="Image showing navigation to gh-pages branch." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/create_feature_branch_1.png">


<img alt="Image showing next steps to create a new branch." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/create_feature_branch_2.png">

You can now work within the newly created branch. Select an existing markdown file to edit or create a new markdown (.md) file following the instructions below.

### Create a New Markdown File
 
**Notes:**
- Use the naming convention: (chapter #)_(title of your chapter).md
  - Example: 11.0_ms_teams.md
- Use all lowercase and underscores (_) instead of spaces.
- File name must end in ".md" to indicate a markdown file (so markdown syntax will work correctly).
- If your chapter is long, break your markdown file into sectioned markdown files to easily find the section of the chapter you want to edit.
  - Example: 4.3_improve_team_psd_manual.md
 
<img alt="Image showing numbered steps to create a new markdown file." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/create_markdown_file.png">

### Edit/Format the Markdown (.md) File

#### Heading Rules

- Header 1: Title of Chapter &mdash; syntax=`# (name of chapter)` 
- Header 2: Main Sections of the Chapter &mdash; syntax=`## (name of section)`
- Header 3 (hidden unless Header 2 is clicked on in the manual): Sub-level for the main section  &mdash; syntax=`### (name of sub-level heading)`
- Header 4 (hidden within the content of Header 3): Use to further indicate additional sections/sub-headings within a chapter  &mdash; syntax=`#### (name of further sub-level heading)`

Examples: 

The following shows examples of headings within the manual&mdash;first, the markup syntax for headers, then a screenshot of what these headers look like in the table of contents and the manual.

- Header 1: `# Standard Operations`
- Header 2: `## Project Trackers`
- Header 3: `### bug_tracker`
- Header 4: `#### Types of Bugs`

| Table of Contents Headings | Manual Headings |
|:--:|:--:|
|<img alt="Image of Team PSD Manual Table of Contents." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/headings_toc.png">|<img alt="Image of manual headings examples." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/headings_manual.png">|

### Add Markdown File Name in the "_bookdown.yml" File

- The "bookdown.yml" file prints out the manual in the order of the the markdown files listed in line 6 (and beyond), always beginning with `index.Rmd`, followed by .md file names.

- Add your markdown file name where you want the file to appear in the manual.
  - **Note:** Make sure to include quotations around the file name and a comma, if needed!
 
<img alt="Image of bookdown.yml file contents." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/bookdown_add_file.png">

This is a great way to check the formatting and output of your markdown file in the actual Manual before you submit a pull request.

### Create a Pull Request

There are several ways to create a pull request; below is one example.

1. Navigate to the Pull requests tab on the top navbar in GitHub.
2. Click the New pull request button.

<img alt="Image showing first two clicks of a pull request." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/pull_request_1.png">

3. Click the ```base:``` dropdown, then select gh-pages.

<img alt="Image showing third step of a pull request." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/pull_request_2.png">

4. Click the ```compare:``` dropdown, and select your feature branch.

<img alt="Image showing fourth step of a pull request." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/pull_request_3.png">

5. Check that you are pulling the _feature branch_ into the _gh-pages_ head branch. You should see an "Able to merge." message.
6. Click the Create pull request button. A pull request form will appear.
 
<img alt="Image showing last two steps of a pull request." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/pull_request_4.png">

7. Fill out the necessary information. Then click the Create pull request button.

<img alt="Image of pull request form." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/pull_request_form.png">

### Check the File against GitHub Actions

Once a pull request has been made, an automatic process checks the file(s) against the repo's Linter Actions. Scroll down the pull request page to see real-time progress of the Linter Actions. The screenshot below shows Actions in progress with no issues so far in the checks:

<img alt="Image of Linter Actions in progress." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/linter_process_begin.png">

#### Linter Actions

Linter Actions are automated processes that check your code for issues, errors, or style violations based on predefined rules. The linters for this repo fire automatically when a pull request is made. The purpose of these actions are to ensure code quality, maintain consistency, and catch errors early. 

**Note:** Linter Actions will _not_ fire if the feature branch name is does not follow the exact syntax needed (see [Create a Feature Branch from the GH-Pages Branch](#create-a-feature-branch-from-the-gh-pages-branch)). 

**Review Linter Results**

If the Actions progress area has a red X and "All checks have failed" message (like the screenshot below), click on Details in the ActionChecker to navigate to the Spell Checker, Markdown Link Checker, and Markdown Linter for Directory Level Scan.

<img alt="Image of ActionChecker identifying errors." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/actionchecker_failing.png">

**ActionChecker details screen:**

Check for a red X by each GH Action and read the output of where errors occurred. Some errors you can address yourself, some are safely ignorable, and others may need to be addressed by the Development Team.   

<img alt="Image of ActionChecker details screen." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/actionchecker_details.png">

#### Editors

There are several editor actions that will screen your documents for proper format, compliance with editorial rules and spelling. Editors refer to tools or interfaces where you can directly edit (correct) code or files if the editor actions returned errors.

- The **Spell Checker** checks for spelling errors or unknown acronyms in your commit and its associated files. This check usually passes with no errors. If the spell checker throws an error, you may need to either 1) correct a spelling mistake in your document or 2) add it to Team PSD's custom dictionary file the Spell Checker uses.

Click the caret next to Spell Checker to reveal the spelling errors found. In the image below, lines 14-18 identify unkown words and/or spelling mistakes.

<img alt="Image of Spell Checker results." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/spell_checker_results.png">

##### Correct a Misspelling in a Markdown File

From the example above, there is one misspelling: chapterr. The Spell Checkers gives the line number in which spelling errors were found. 

<img alt="Image of ActionChecker line showing misspelling." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/spell_checker_misspelling.png">

We can tell that this spelling mistake is in line #190 of the document "2.0_use_and_contribute_to_teampsd_manual.md".

<img alt="Image of ActionChecker line showing misspelling." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/spell_checker_misspelling_markdown.png">

Go to the identified markdown file, correct the mistake, and make a commit. 

##### Update cspellcdict.txt

From the example above, there are two unknown words: "callouts" and "GH". We can amend the custom dictionary file so these errors won't show again. 

To do this, navigate to the repo you're working within (in this example, it's the teampsd repo), select the gh-pages branch (not the feature branch you've been working in), and click the .github/workflows folder. Then click on cspellcdict.txt (Team PSD's custom dictionary).

<img alt="Image showing navigation steps to reach custom dictionary." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/spell_checker_nav2cspellcdict.png">

Edit this file by adding the previously unknown word(s)/acronyms to the list. Bonus points if you add them in the correct alphabetical order! As seen in the screenshot below, both unknown words were added. Your future self (and teammates) may appreciate singular and/or plural versions of a word being added to this file, too. Commit your changes when done.

<img alt="Image of cspellcdict file showing added words." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/spell_checker_cspellcdict_add.png">

- The **Markdown Link Checker** tests all the links in your document to make sure they work correctly. Links include hyperlinks to internal and external (to VA domain) webpages, links to image files, and links to content within the document itself. 

Click the caret next to Markdown Link Checker to reveal the status of all links within your committed files. Scroll past the colored text until you see a checkmark (working link) or an X (non-working link) within brackets beside each link.

Examples of the different types of links are shown below:

<img alt="Image of Markdown Link Checker links with callouts defining each type of link." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/link_checker_link_types.png">

***It is normal for this checker to throw errors for links within the VA domain. These can safely be ignored.**

Make any link corrections needed within the document(s) and commit your changes.

- The **Markdown Linter for Directory Level Scan** tests your markdown file for compliance with markdown editorial rules. For example, it checks for additional spaces after each line, proper sequence of headers, bulleted lists, and other basic editorial screenings.

> Screenshot w/callouts to be developed.

Once edits based on failed checks and feedback from reviewers have been implemented, the pull request is ready to be merged.

### Publish to the Master gh-pages Branch

Once you've reviewed ActionChecker details and addressed errors, you can request teammates review your request. You can also merge the pull request yourself. 

To merge the pull request, return to the Pull requests tab and click the Merge pull request button:

<img alt="Image of in-process pull request with merge pull request button highlighted." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/merge_pull_request.png">

Then click the Confirm merge button:

<img alt="Image of in-process pull request with confirm merge button highlighted." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/confirm_merge_pull_request.png">

Follow the progress of your merge by clicking the Actions tab. Be patient; it can take a few minutes for the workflows to complete. An example of the status change is provided below:

<img alt="Image of workflow status icons in both pending and complete states." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/merge_complete.png">

Once you see a green status next to "pages build and deployment", double-check that your chapter was published at https://mtl.how/teampsd_manual. Once you see your changes live in the manual, you can delete the feature branch. This can be done in two ways:

- Click the Delete branch button on the pull request:

<img alt="Image of button to delete the feature branch from a pull request." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/feature_branch_delete1.png">

--OR--

- Navigate to the teampsd repo, click the master branch dropdown, and select View all branches. Locate your feature branch and click the trash can icon on the right-hand side of the screen:

<img alt="Image with highlights showing clicks needed to delete feature branch from Branches page." src="https://raw.githubusercontent.com/lzim/teampsd/gh-pages/images/feature_branch_delete2.png">